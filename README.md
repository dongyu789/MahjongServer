# MahjongServer
one server to Mahjong game

## 使用方法
拷贝代码到linux中，在makefile目录执行make，然后运行main文件即可

## 服务器设计
- c++网络编程
- io多路复用（epoll）
- 守护进程（daemon）

## 服务器设计思路
- 根据客户端发过来的消息，针对不同消息类型进行判断处理
- 用户加入桌子
 - 桌子不存在：创建桌子后加入
 - 桌子存在：
  - 桌子满：踢出
  - 桌子空：加入
- 用户退出
  - 最后一个用户退出（释放用户数据后释放桌子）
  - 非最后一个用户退出（释放用户数据）
- 解决同时碰杠吃胡
  - 设置权重，等待所有非出牌玩家回复完毕后对操作进行排序，根据排序优先级和麻将规则处理
- 出牌权（用户的出牌权由服务器控制）
- 对用户的动作向对应桌其他用户进行转发
- 发牌
  - 开局发牌
  - 局中单个用户摸牌 
